class AgeVerification extends HTMLElement{constructor(){super(),this.accept_button=this.querySelector(".age-verification--accept"),this.decline_button=this.querySelector(".age-verification--decline"),this.primary_view=this.querySelector(".age-verification--primary"),this.return_button=this.querySelector(".age-verification--return"),this.secondary_view=this.querySelector(".age-verification--secondary"),this.viewport=document.querySelector(".layout--viewport"),this.state={closed:!0,view_disabled:!1}}connectedCallback(){this.eventListeners(),window.localStorage&&void 0!==localStorage[theme.local_storage.age_verification]||Shopify.designMode||this.open()}eventListeners(){this.accept_button.on("click",()=>this.close()),this.decline_button.on("click",()=>this.toggleView(!0)),this.return_button.on("click",()=>this.toggleView(!1)),Shopify.designMode&&(this.on("theme:section:select",()=>this.open()),this.on("theme:section:deselect",()=>this.close()))}open(){this.state.closed&&(this.window_offset=window.scrollY,this.viewport.setStyles({top:`-${this.window_offset}px`,position:"fixed"}),this.state.closed=!1,this.setAttribute("aria-hidden",!1),setTimeout(()=>this.setAttribute("data-transition-active",!0),0))}close(){this.state.closed||(this.viewport.removeAttribute("style"),window.scrollTo(0,this.window_offset),this.setAttribute("data-transition-type","fade-out"),localStorage[theme.local_storage.age_verification]="true",this.state.closed=!0,this.on("transitionend",()=>{this.setAttribute("data-transition-type","fade-in"),this.setAttribute("data-transition-active",!1),this.setAttribute("aria-hidden",!0)},{once:!0}))}toggleView(t){if(!this.state.view_disabled){const e=t?this.secondary_view:this.primary_view,i=t?this.primary_view:this.secondary_view;i.on("transitionend",()=>{e.setAttribute("data-transition-active",!0),i.setAttribute("data-transition-type","fade-in"),i.setAttribute("data-transition-active",!1)},{once:!0}),e.on("transitionend",()=>{e.setAttribute("data-transition-type","fade-out"),e.setAttribute("data-transition-active",!1),this.state.view_disabled=!1},{once:!0}),this.state.view_disabled=!0,i.setAttribute("data-transition-active",!0)}}}customElements.define("age-verification",AgeVerification);